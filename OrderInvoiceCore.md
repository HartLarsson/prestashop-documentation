OrderInvoiceCore
===============






* Class name: OrderInvoiceCore
* Namespace: 
* Parent class: [ObjectModel](ObjectModelCore)

* This class is defined in [classes/order/OrderInvoice.php line 27](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#27)



Constants
----------


### TAX_EXCL

    const TAX_EXCL = 0



* This constant is defined in [classes/order/OrderInvoice.php line 29](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#29)


### TAX_INCL

    const TAX_INCL = 1



* This constant is defined in [classes/order/OrderInvoice.php line 30](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#30)


### DETAIL

    const DETAIL = 2



* This constant is defined in [classes/order/OrderInvoice.php line 31](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#31)


Properties
----------


### $id_order

    public integer $id_order





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 34](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#34)


### $number

    public integer $number





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 37](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#37)


### $delivery_number

    public integer $delivery_number





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 40](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#40)


### $delivery_date

    public integer $delivery_date = '0000-00-00 00:00:00'





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 43](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#43)


### $total_discount_tax_excl

    public float $total_discount_tax_excl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 46](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#46)


### $total_discount_tax_incl

    public float $total_discount_tax_incl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 49](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#49)


### $total_paid_tax_excl

    public float $total_paid_tax_excl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 52](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#52)


### $total_paid_tax_incl

    public float $total_paid_tax_incl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 55](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#55)


### $total_products

    public float $total_products





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 58](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#58)


### $total_products_wt

    public float $total_products_wt





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 61](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#61)


### $total_shipping_tax_excl

    public float $total_shipping_tax_excl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 64](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#64)


### $total_shipping_tax_incl

    public float $total_shipping_tax_incl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 67](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#67)


### $shipping_tax_computation_method

    public integer $shipping_tax_computation_method





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 70](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#70)


### $total_wrapping_tax_excl

    public float $total_wrapping_tax_excl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 73](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#73)


### $total_wrapping_tax_incl

    public float $total_wrapping_tax_incl





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 76](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#76)


### $shop_address

    public string $shop_address





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 79](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#79)


### $invoice_address

    public string $invoice_address





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 82](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#82)


### $delivery_address

    public string $delivery_address





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 85](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#85)


### $note

    public string $note





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 88](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#88)


### $date_add

    public integer $date_add





* Visibility: **public**
* This property is defined in [classes/order/OrderInvoice.php line 91](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#91)


### $_total_paid_cache

    protected array $_total_paid_cache = array()





* Visibility: **protected**
* This property is **static**.
* This property is defined in [classes/order/OrderInvoice.php line 94](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#94)


### $order

    private \Order $order





* Visibility: **private**
* This property is defined in [classes/order/OrderInvoice.php line 97](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#97)


### $definition

    public mixed $definition = array('table' => 'order_invoice', 'primary' => 'id_order_invoice', 'fields' => array('id_order' => array('type' => self::TYPE_INT, 'validate' => 'isUnsignedId', 'required' => true), 'number' => array('type' => self::TYPE_INT, 'validate' => 'isUnsignedId', 'required' => true), 'delivery_number' => array('type' => self::TYPE_INT, 'validate' => 'isUnsignedId'), 'delivery_date' => array('type' => self::TYPE_DATE, 'validate' => 'isDateFormat'), 'total_discount_tax_excl' => array('type' => self::TYPE_FLOAT), 'total_discount_tax_incl' => array('type' => self::TYPE_FLOAT), 'total_paid_tax_excl' => array('type' => self::TYPE_FLOAT), 'total_paid_tax_incl' => array('type' => self::TYPE_FLOAT), 'total_products' => array('type' => self::TYPE_FLOAT), 'total_products_wt' => array('type' => self::TYPE_FLOAT), 'total_shipping_tax_excl' => array('type' => self::TYPE_FLOAT), 'total_shipping_tax_incl' => array('type' => self::TYPE_FLOAT), 'shipping_tax_computation_method' => array('type' => self::TYPE_INT), 'total_wrapping_tax_excl' => array('type' => self::TYPE_FLOAT), 'total_wrapping_tax_incl' => array('type' => self::TYPE_FLOAT), 'shop_address' => array('type' => self::TYPE_HTML, 'validate' => 'isCleanHtml', 'size' => 1000), 'invoice_address' => array('type' => self::TYPE_HTML, 'validate' => 'isCleanHtml', 'size' => 1000), 'delivery_address' => array('type' => self::TYPE_HTML, 'validate' => 'isCleanHtml', 'size' => 1000), 'note' => array('type' => self::TYPE_STRING, 'validate' => 'isCleanHtml', 'size' => 65000), 'date_add' => array('type' => self::TYPE_DATE, 'validate' => 'isDate')))





* Visibility: **public**
* This property is **static**.
* This property is defined in [classes/order/OrderInvoice.php line 102](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#102)


Methods
-------


### add

    mixed OrderInvoiceCore::add($autodate, $null_values)





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 129](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#129)


#### Arguments
* $autodate **mixed**
* $null_values **mixed**



### getProductsDetail

    mixed OrderInvoiceCore::getProductsDetail()





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 146](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#146)




### getInvoiceByNumber

    mixed OrderInvoiceCore::getInvoiceByNumber($id_invoice)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 158](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#158)


#### Arguments
* $id_invoice **mixed**



### getProducts

    array OrderInvoiceCore::getProducts($products, $selected_products, $selected_qty)

Get order products



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 186](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#186)


#### Arguments
* $products **mixed**
* $selected_products **mixed**
* $selected_qty **mixed**



### setProductCustomizedDatas

    mixed OrderInvoiceCore::setProductCustomizedDatas($product, $customized_datas)





* Visibility: **protected**
* This method is defined in [classes/order/OrderInvoice.php line 267](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#267)


#### Arguments
* $product **mixed**
* $customized_datas **mixed**



### setProductCurrentStock

    mixed OrderInvoiceCore::setProductCurrentStock($product)

This method allow to add stock information on a product detail



* Visibility: **protected**
* This method is defined in [classes/order/OrderInvoice.php line 282](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#282)


#### Arguments
* $product **mixed**



### setProductImageInformations

    mixed OrderInvoiceCore::setProductImageInformations($product)

This method allow to add image information on a product detail



* Visibility: **protected**
* This method is defined in [classes/order/OrderInvoice.php line 298](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#298)


#### Arguments
* $product **mixed**



### useOneAfterAnotherTaxComputationMethod

    boolean OrderInvoiceCore::useOneAfterAnotherTaxComputationMethod()

This method returns true if at least one order details uses the
One After Another tax computation method.



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 331](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#331)




### displayTaxBasesInProductTaxesBreakdown

    mixed OrderInvoiceCore::displayTaxBasesInProductTaxesBreakdown()





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 344](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#344)




### getOrder

    mixed OrderInvoiceCore::getOrder()





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 349](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#349)




### getProductTaxesBreakdown

    mixed OrderInvoiceCore::getProductTaxesBreakdown($order)





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 358](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#358)


#### Arguments
* $order **mixed**



### getShippingTaxesBreakdown

    array OrderInvoiceCore::getShippingTaxesBreakdown(\Order $order)

Returns the shipping taxes breakdown



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 425](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#425)


#### Arguments
* $order **[Order](OrderCore)**



### getWrappingTaxesBreakdown

    array OrderInvoiceCore::getWrappingTaxesBreakdown()

Returns the wrapping taxes breakdown



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 494](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#494)




### getEcoTaxTaxesBreakdown

    array OrderInvoiceCore::getEcoTaxTaxesBreakdown()

Returns the ecotax taxes breakdown



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 557](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#557)




### getByDateInterval

    array OrderInvoiceCore::getByDateInterval($date_from, $date_to)

Returns all the order invoice that match the date interval



* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 585](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#585)


#### Arguments
* $date_from **mixed**
* $date_to **mixed**



### getByStatus

    array OrderInvoiceCore::getByStatus($id_order_state)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 606](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#606)


#### Arguments
* $id_order_state **mixed**



### getByDeliveryDateInterval

    array OrderInvoiceCore::getByDeliveryDateInterval($date_from, $date_to)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 627](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#627)


#### Arguments
* $date_from **mixed**
* $date_to **mixed**



### getCarrier

    mixed OrderInvoiceCore::getCarrier($id_order_invoice)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 646](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#646)


#### Arguments
* $id_order_invoice **mixed**



### getCarrierId

    mixed OrderInvoiceCore::getCarrierId($id_order_invoice)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 660](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#660)


#### Arguments
* $id_order_invoice **mixed**



### retrieveOneById

    \OrderInvoice OrderInvoiceCore::retrieveOneById(integer $id)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 674](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#674)


#### Arguments
* $id **integer**



### getTotalPaid

    float OrderInvoiceCore::getTotalPaid()

Amounts of payments



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 688](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#688)




### getRestPaid

    float OrderInvoiceCore::getRestPaid()

Rest Paid



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 709](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#709)




### getSibling

    \PrestaShopCollection|array OrderInvoiceCore::getSibling()

Return collection of order invoice object linked to the payments of the current order invoice object



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 720](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#720)




### getSiblingTotal

    mixed OrderInvoiceCore::getSiblingTotal(integer $mod)

Return total to paid of sibling invoices



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 753](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#753)


#### Arguments
* $mod **integer** - &lt;p&gt;TAX_EXCL, TAX_INCL, DETAIL&lt;/p&gt;



### getGlobalRestPaid

    mixed OrderInvoiceCore::getGlobalRestPaid()

Get global rest to paid
   This method will return something different of the method getRestPaid if
   there is an other invoice linked to the payments of the current invoice



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 782](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#782)




### isPaid

    boolean OrderInvoiceCore::isPaid()





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 812](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#812)




### getOrderPaymentCollection

    \PrestaShopCollection OrderInvoiceCore::getOrderPaymentCollection()





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 821](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#821)




### getInvoiceNumberFormatted

    string OrderInvoiceCore::getInvoiceNumberFormatted(integer $id_lang, $id_shop)

Get the formatted number of invoice



* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 832](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#832)


#### Arguments
* $id_lang **integer** - &lt;p&gt;for invoice_prefix&lt;/p&gt;
* $id_shop **mixed**



### saveCarrierTaxCalculator

    mixed OrderInvoiceCore::saveCarrierTaxCalculator(array $taxes_amount)





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 848](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#848)


#### Arguments
* $taxes_amount **array**



### saveWrappingTaxCalculator

    mixed OrderInvoiceCore::saveWrappingTaxCalculator(array $taxes_amount)





* Visibility: **public**
* This method is defined in [classes/order/OrderInvoice.php line 861](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#861)


#### Arguments
* $taxes_amount **array**



### getCurrentFormattedShopAddress

    mixed OrderInvoiceCore::getCurrentFormattedShopAddress($id_shop)





* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 874](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#874)


#### Arguments
* $id_shop **mixed**



### fixAllShopAddresses

    mixed OrderInvoiceCore::fixAllShopAddresses()

This method is used to fix shop addresses that cannot be fixed during upgrade process
(because uses the whole environnement of PS classes that is not available during upgrade).

This method should execute once on an upgraded PrestaShop to fix all OrderInvoices in one shot.
This method is triggered once during a (non bulk) creation of a PDF from an OrderInvoice that is not fixed yet.

* Visibility: **public**
* This method is **static**.
* This method is defined in [classes/order/OrderInvoice.php line 895](https://github.com/PrestaShop/PrestaShop/blob/1.6.1.1/classes/order/OrderInvoice.php#895)



